{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/log_create.css' %}">
{% endblock %}

{% block content %}


<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <p>タイトル：</p>
    {{ form.title }} <br>
    <p>内容：</p>
    {{ form.content }} <br>
    <input type="file" name="image" id="imageInput">
    <img id="imagePreview" src="#" alt="プレビュー"> <br>
    {{ form.tags }}
    <button type="submit" class="btn">投稿</button>
</form>



<script>
    const imageInput = document.getElementById('imageInput');
    const imagePreview = document.getElementById('imagePreview');
    const noImageSrc = "{% static 'images/NoImage.jpg' %}";

    imagePreview.src = noImageSrc;
    imagePreview.style.display = 'block';

    imageInput.addEventListener('change', function() {
        const file = this.files[0];

        if (file) {
            const reader = new FileReader();

            reader.addEventListener('load', function() {
                imagePreview.src = reader.result;
                imagePreview.style.display = 'block';
            });

            reader.readAsDataURL(file);
        } else {
            // ファイルが選択されていない場合、noimage.png を表示
            imagePreview.src = noImageSrc;
        }
    });

    
</script>

{% endblock %}